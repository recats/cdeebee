import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";import _objectSpread from"@babel/runtime/helpers/objectSpread";import _asyncToGenerator from"@babel/runtime/helpers/asyncToGenerator";import _defineProperty from"@babel/runtime/helpers/defineProperty";var _isArray=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function _checkForMethod(e,t){return function(){var r=arguments.length;if(0===r)return t();var n=arguments[r-1];return _isArray(n)||"function"!=typeof n[e]?t.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}var _checkForMethod_1=_checkForMethod;function _isPlaceholder(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}var _isPlaceholder_1=_isPlaceholder;function _curry1(e){return function t(r){return 0===arguments.length||_isPlaceholder_1(r)?t:e.apply(this,arguments)}}var _curry1_1=_curry1;function _curry2(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return _isPlaceholder_1(r)?t:_curry1_1(function(t){return e(r,t)});default:return _isPlaceholder_1(r)&&_isPlaceholder_1(n)?t:_isPlaceholder_1(r)?_curry1_1(function(t){return e(t,n)}):_isPlaceholder_1(n)?_curry1_1(function(t){return e(r,t)}):e(r,n)}}}var _curry2_1=_curry2;function _curry3(e){return function t(r,n,a){switch(arguments.length){case 0:return t;case 1:return _isPlaceholder_1(r)?t:_curry2_1(function(t,n){return e(r,t,n)});case 2:return _isPlaceholder_1(r)&&_isPlaceholder_1(n)?t:_isPlaceholder_1(r)?_curry2_1(function(t,r){return e(t,n,r)}):_isPlaceholder_1(n)?_curry2_1(function(t,n){return e(r,t,n)}):_curry1_1(function(t){return e(r,n,t)});default:return _isPlaceholder_1(r)&&_isPlaceholder_1(n)&&_isPlaceholder_1(a)?t:_isPlaceholder_1(r)&&_isPlaceholder_1(n)?_curry2_1(function(t,r){return e(t,r,a)}):_isPlaceholder_1(r)&&_isPlaceholder_1(a)?_curry2_1(function(t,r){return e(t,n,r)}):_isPlaceholder_1(n)&&_isPlaceholder_1(a)?_curry2_1(function(t,n){return e(r,t,n)}):_isPlaceholder_1(r)?_curry1_1(function(t){return e(t,n,a)}):_isPlaceholder_1(n)?_curry1_1(function(t){return e(r,t,a)}):_isPlaceholder_1(a)?_curry1_1(function(t){return e(r,n,t)}):e(r,n,a)}}}var _curry3_1=_curry3,slice=_curry3_1(_checkForMethod_1("slice",function(e,t,r){return Array.prototype.slice.call(r,e,t)})),slice_1=slice,omit=_curry2_1(function(e,t){for(var r={},n={},a=0,o=e.length;a<o;)n[e[a]]=1,a+=1;for(var i in t)n.hasOwnProperty(i)||(r[i]=t[i]);return r}),omit_1=omit;function _has(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var _has_1=_has,_isInteger=Number.isInteger||function(e){return e<<0===e},assoc=_curry3_1(function(e,t,r){var n={};for(var a in r)n[a]=r[a];return n[e]=t,n}),assoc_1=assoc,isNil=_curry1_1(function(e){return null==e}),isNil_1=isNil,assocPath=_curry3_1(function e(t,r,n){if(0===t.length)return r;var a=t[0];if(t.length>1){var o=!isNil_1(n)&&_has_1(a,n)?n[a]:_isInteger(t[1])?[]:{};r=e(Array.prototype.slice.call(t,1),r,o)}if(_isInteger(a)&&_isArray(n)){var i=[].concat(n);return i[a]=r,i}return assoc_1(a,r,n)}),assocPath_1=assocPath;function _cloneRegExp(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}var _cloneRegExp_1=_cloneRegExp,type=_curry1_1(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),type_1=type;function _clone(e,t,r,n){var a=function(a){for(var o=t.length,i=0;i<o;){if(e===t[i])return r[i];i+=1}for(var s in t[i+1]=e,r[i+1]=a,e)a[s]=n?_clone(e[s],t,r,!0):e[s];return a};switch(type_1(e)){case"Object":return a({});case"Array":return a([]);case"Date":return new Date(e.valueOf());case"RegExp":return _cloneRegExp_1(e);default:return e}}var _clone_1=_clone,clone=_curry1_1(function(e){return null!=e&&"function"==typeof e.clone?e.clone():_clone_1(e,[],[],!0)}),clone_1=clone,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{e[symToStringTag]=void 0}catch(e){}var n=nativeObjectToString.call(e);return t?e[symToStringTag]=r:delete e[symToStringTag],n}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag(e):_objectToString(e)}var _baseGetTag=baseGetTag;function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=function(){var e=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty$1=defineProperty;function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty$1?_defineProperty$1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(e,t,r){var n=e[t];hasOwnProperty$2.call(e,t)&&eq_1(n,r)&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignValue=assignValue,isArray=Array.isArray,isArray_1=isArray;function isObjectLike(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike,symbolTag="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$3.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$4.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache,Map=_getNative(_root,"Map"),_Map=Map;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(memoize.Cache||_MapCache),r}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,function(e,r,n,a){t.push(n?a.replace(reEscapeChar,"$1"):r||e)}),t}),_stringToPath=stringToPath;function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var _arrayMap=arrayMap,INFINITY=1/0,symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}var _baseToString=baseToString;function toString(e){return null==e?"":_baseToString(e)}var toString_1=toString;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}var _isIndex=isIndex,INFINITY$1=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _toKey=toKey;function baseSet(e,t,r,n){if(!isObject_1(e))return e;for(var a=-1,o=(t=_castPath(t,e)).length,i=o-1,s=e;null!=s&&++a<o;){var c=_toKey(t[a]),u=r;if(a!=i){var l=s[c];void 0===(u=n?n(l,c,s):void 0)&&(u=isObject_1(l)?l:_isIndex(t[a+1])?[]:{})}_assignValue(s,c,u),s=s[c]}return e}var _baseSet=baseSet;function set(e,t,r){return null==e?e:_baseSet(e,t,r)}var set_1=set;const types={CDEEBEE_REQUESTMANAGER_SHIFT:"@@cdeebee/REQUESTMANAGER_SHIFT",CDEEBEE_REQUESTMANAGER_SET:"@@cdeebee/REQUESTMANAGER_SET",CDEEBEE_ERRORHANDLER_SET:"@@cdeebee/ERRORHANDLER_SET",CDEEBEE_ENTITY_CHANGE_FIELD:"@@cdeebee/ENTITY_CHANGE_FIELD",CDEEBEE_RESET_ENTITY:"@@cdeebee/RESET_ENTITY",CDEEBEE_SET_ENTITY:"@@cdeebee/SET_ENTITY",CDEEBEEE_UPDATE:"@@cdeebee/UPDATE",CDEEBEEE_DROP:"@@cdeebee/DROP",CDEEBEEE_DROP_ELEMENT:"@@cdeebee/DROP_ELEMENT",CHANGE_ROUTE:"@@router/LOCATION_CHANGE"},EntityState={NEW:"NEW",EDITING:"EDITING",NORMAL:"NORMAL"},cdeebeeMergeStrategy={merge:"merge",replace:"replace"};function _isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}var _isObject_1=_isObject,mergeWithKey=_curry3_1(function(e,t,r){var n,a={};for(n in t)_has_1(n,t)&&(a[n]=_has_1(n,r)?e(n,t[n],r[n]):t[n]);for(n in r)_has_1(n,r)&&!_has_1(n,a)&&(a[n]=r[n]);return a}),mergeWithKey_1=mergeWithKey,mergeDeepWithKey=_curry3_1(function e(t,r,n){return mergeWithKey_1(function(r,n,a){return _isObject_1(n)&&_isObject_1(a)?e(t,n,a):t(r,n,a)},r,n)}),mergeDeepWithKey_1=mergeDeepWithKey,mergeDeepRight=_curry2_1(function(e,t){return mergeDeepWithKey_1(function(e,t,r){return r},e,t)}),mergeDeepRight_1=mergeDeepRight,checkNetworkActivity=_checkNetworkActivity;const omitKeys=e=>omit_1(["__entity","__state"],e),cancelationRequest=e=>{return{activeRequest:e.filter(e=>e.requestCancel&&e.source&&e.source.cancel instanceof Function&&e.source.cancel(e))}};function _checkNetworkActivity(e,t){if(!t||0===e.length)return!1;const r=t instanceof Array?t:[t],n=e.map(e=>e.api);for(let e=0;e<r.length;e+=1)if(n.includes(r[e]))return!0;return!1}const getSubEntity=e=>e.__entity||e,getEntityState=e=>e.__entity?e.__entity.__state:EntityState.NORMAL,insertEntity=e=>(e.__state=EntityState.NEW,e),commitEntity=e=>{return getEntityState(e)===EntityState.NORMAL?(console.warn("commit works only in editing and new states"),e):omitKeys(e)},resetEntity=e=>{return getEntityState(e)===EntityState.NORMAL?(console.warn("reset works only in editing and new states"),e):omitKeys(e)},editEntity=e=>{if(getEntityState(e)===EntityState.EDITING)return e;const t=clone_1(e);return t.__entity=clone_1(e),t.__entity.__state=EntityState.EDITING,t},defaultNormalize=e=>{let t=e.response,r=(t.responseStatus,_objectWithoutProperties(t,["responseStatus"])),n=e.cdeebee,a=e.mergeStrategy;const o=Object.keys(r);for(var i=0;i<o.length;i++){const e=o[i],t={};if(r[e]instanceof Object){var s=!0,c=!1,u=void 0;try{for(var l,_=r[e].data[Symbol.iterator]();!(s=(l=_.next()).done);s=!0){const n=l.value;t[n[r[e].primaryKey]]=n}}catch(e){c=!0,u=e}finally{try{s||null==_.return||_.return()}finally{if(c)throw u}}a===cdeebeeMergeStrategy.merge?r[e]=mergeDeepRight_1(n[e],t):a===cdeebeeMergeStrategy.replace&&(r[e]=t)}else null!==r[e]&&void 0!==r[e]||(r=omit_1([e],r))}return r};function rewire$checkNetworkActivity(e){checkNetworkActivity=e}function restore(){checkNetworkActivity=_checkNetworkActivity}var helpers=Object.freeze({cancelationRequest:cancelationRequest,get checkNetworkActivity(){return checkNetworkActivity},getSubEntity:getSubEntity,getEntityState:getEntityState,insertEntity:insertEntity,commitEntity:commitEntity,resetEntity:resetEntity,editEntity:editEntity,defaultNormalize:defaultNormalize,rewire$checkNetworkActivity:rewire$checkNetworkActivity,restore:restore});const INITIAL_STORAGE={},cdeebee=(e=INITIAL_STORAGE,t)=>{const r=t.type,n=t.payload;switch(r){case types.CDEEBEEE_UPDATE:return _objectSpread({},e,n.response);case types.CDEEBEE_ENTITY_CHANGE_FIELD:{const t=e[n.entityList],r=editEntity(t[n.entityID]),a=clone_1(getSubEntity(r));return n.list.forEach(({key:e,value:t})=>set_1(a,e,t)),assocPath_1([n.entityList,n.entityID,"__entity"],a,e)}case types.CDEEBEE_SET_ENTITY:return assocPath_1([n.entityList,n.entityID],n.entity,e);case types.CDEEBEE_RESET_ENTITY:{const t=e[n.entityList];return assocPath_1([n.entityList,n.entityID],resetEntity(t[n.entityID]),e)}case types.CDEEBEEE_DROP:return INITIAL_STORAGE;case types.CDEEBEEE_DROP_ELEMENT:return omit_1([n.entityList,n.entityID],e);default:return e}},INITIAL_REQUEST={activeRequest:[],requestByApiUrl:{},errorHandler:{}},requestManager=(e=INITIAL_REQUEST,t)=>{const r=t.type,n=t.payload;switch(r){case types.CDEEBEE_REQUESTMANAGER_SET:return _objectSpread({},e,{activeRequest:[...e.activeRequest,n]});case types.CDEEBEE_REQUESTMANAGER_SHIFT:return _objectSpread({},e,{activeRequest:slice_1(1,1/0,e.activeRequest)});case types.CDEEBEEE_UPDATE:return _objectSpread({},e,{requestByApiUrl:_objectSpread({},e.requestByApiUrl,{[n.api]:n.cleanResponse})});case types.CDEEBEE_ERRORHANDLER_SET:return _objectSpread({},e,{errorHandler:_objectSpread({},e.errorHandler,{[n.api]:n.cleanResponse})});case types.CHANGE_ROUTE:return cancelationRequest(e.activeRequest);default:return e}};var bind=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},isBuffer_1=function(e){return null!=e&&(isBuffer(e)||isSlowBuffer(e)||!!e._isBuffer)};function isBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer(e.slice(0,0))}var toString$1=Object.prototype.toString;function isArray$1(e){return"[object Array]"===toString$1.call(e)}function isArrayBuffer(e){return"[object ArrayBuffer]"===toString$1.call(e)}function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData}function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isUndefined(e){return void 0===e}function isObject$1(e){return null!==e&&"object"==typeof e}function isDate(e){return"[object Date]"===toString$1.call(e)}function isFile(e){return"[object File]"===toString$1.call(e)}function isBlob(e){return"[object Blob]"===toString$1.call(e)}function isFunction$1(e){return"[object Function]"===toString$1.call(e)}function isStream(e){return isObject$1(e)&&isFunction$1(e.pipe)}function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),isArray$1(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function merge(){var e={};function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=merge(e[r],t):e[r]=t}for(var r=0,n=arguments.length;r<n;r++)forEach(arguments[r],t);return e}function extend(e,t,r){return forEach(t,function(t,n){e[n]=r&&"function"==typeof t?bind(t,r):t}),e}var utils={isArray:isArray$1,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer_1,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject$1,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction$1,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim},normalizeHeaderName=function(e,t){utils.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})},enhanceError=function(e,t,r,n,a){return e.config=t,r&&(e.code=r),e.request=n,e.response=a,e},createError=function(e,t,r,n,a){var o=new Error(e);return enhanceError(o,t,r,n,a)},settle=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(createError("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)};function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(utils.isURLSearchParams(t))n=t.toString();else{var a=[];utils.forEach(t,function(e,t){null!=e&&(utils.isArray(e)?t+="[]":e=[e],utils.forEach(e,function(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),a.push(encode(t)+"="+encode(e))}))}),n=a.join("&")}return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e},ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders=function(e){var t,r,n,a={};return e?(utils.forEach(e.split("\n"),function(e){if(n=e.indexOf(":"),t=utils.trim(e.substr(0,n)).toLowerCase(),r=utils.trim(e.substr(n+1)),t){if(a[t]&&ignoreDuplicateOf.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}}),a):a},isURLSameOrigin=utils.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=utils.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(){this.message="String contains an invalid character"}function btoa(e){for(var t,r,n=String(e),a="",o=0,i=chars;n.charAt(0|o)||(i="=",o%1);a+=i.charAt(63&t>>8-o%1*8)){if((r=n.charCodeAt(o+=.75))>255)throw new E;t=t<<8|r}return a}E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError";var btoa_1=btoa,cookies=utils.isStandardBrowserEnv()?{write:function(e,t,r,n,a,o){var i=[];i.push(e+"="+encodeURIComponent(t)),utils.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),utils.isString(n)&&i.push("path="+n),utils.isString(a)&&i.push("domain="+a),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},btoa$1="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||btoa_1,xhr=function(e){return new Promise(function(t,r){var n=e.data,a=e.headers;utils.isFormData(n)&&delete a["Content-Type"];var o=new XMLHttpRequest,i="onreadystatechange",s=!1;if("test"===process.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in o||isURLSameOrigin(e.url)||(o=new window.XDomainRequest,i="onload",s=!0,o.onprogress=function(){},o.ontimeout=function(){}),e.auth){var c=e.auth.username||"",u=e.auth.password||"";a.Authorization="Basic "+btoa$1(c+":"+u)}if(o.open(e.method.toUpperCase(),buildURL(e.url,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o[i]=function(){if(o&&(4===o.readyState||s)&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in o?parseHeaders(o.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:1223===o.status?204:o.status,statusText:1223===o.status?"No Content":o.statusText,headers:n,config:e,request:o};settle(t,r,a),o=null}},o.onerror=function(){r(createError("Network Error",e,null,o)),o=null},o.ontimeout=function(){r(createError("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",o)),o=null},utils.isStandardBrowserEnv()){var l=cookies,_=(e.withCredentials||isURLSameOrigin(e.url))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;_&&(a[e.xsrfHeaderName]=_)}if("setRequestHeader"in o&&utils.forEach(a,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete a[t]:o.setRequestHeader(t,e)}),e.withCredentials&&(o.withCredentials=!0),e.responseType)try{o.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){o&&(o.abort(),r(e),o=null)}),void 0===n&&(n=null),o.send(n)})},DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=xhr:"undefined"!=typeof process&&(e=xhr),e}var defaults={adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(e){defaults.headers[e]={}}),utils.forEach(["post","put","patch"],function(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults;function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function(e){utils.forEach(this.handlers,function(t){null!==t&&e(t)})};var InterceptorManager_1=InterceptorManager,transformData=function(e,t,r){return utils.forEach(r,function(r){e=r(e,t)}),e},isCancel=function(e){return!(!e||!e.__CANCEL__)},isAbsoluteURL=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},combineURLs=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e};function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var dispatchRequest=function(e){return throwIfCancellationRequested(e),e.baseURL&&!isAbsoluteURL(e.url)&&(e.url=combineURLs(e.baseURL,e.url)),e.headers=e.headers||{},e.data=transformData(e.data,e.headers,e.transformRequest),e.headers=utils.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),utils.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||defaults_1.adapter)(e).then(function(t){return throwIfCancellationRequested(e),t.data=transformData(t.data,t.headers,e.transformResponse),t},function(t){return isCancel(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})};function Axios(e){this.defaults=e,this.interceptors={request:new InterceptorManager_1,response:new InterceptorManager_1}}Axios.prototype.request=function(e){"string"==typeof e&&(e=utils.merge({url:arguments[0]},arguments[1])),(e=utils.merge(defaults_1,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[dispatchRequest,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},utils.forEach(["delete","get","head","options"],function(e){Axios.prototype[e]=function(t,r){return this.request(utils.merge(r||{},{method:e,url:t}))}}),utils.forEach(["post","put","patch"],function(e){Axios.prototype[e]=function(t,r,n){return this.request(utils.merge(n||{},{method:e,url:t,data:r}))}});var Axios_1=Axios;function Cancel(e){this.message=e}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0;var Cancel_1=Cancel;function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new Cancel_1(e),t(r.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var e;return{token:new CancelToken(function(t){e=t}),cancel:e}};var CancelToken_1=CancelToken,spread=function(e){return function(t){return e.apply(null,t)}};function createInstance(e){var t=new Axios_1(e),r=bind(Axios_1.prototype.request,t);return utils.extend(r,Axios_1.prototype,t),utils.extend(r,t),r}var axios=createInstance(defaults_1);axios.Axios=Axios_1,axios.create=function(e){return createInstance(utils.merge(defaults_1,e))},axios.Cancel=Cancel_1,axios.CancelToken=CancelToken_1,axios.isCancel=isCancel,axios.all=function(e){return Promise.all(e)},axios.spread=spread;var axios_1=axios,default_1=axios;axios_1.default=default_1;var axios$1=axios_1;function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet;function get(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}var get_1=get;if("production"!==process.env.NODE_ENV&&("undefined"==typeof self||!self.crypto&&!self.msCrypto))throw new Error("Your browser does not have secure random generator. If you don’t need unpredictable IDs, you can use nanoid/non-secure.");var crypto=self.crypto||self.msCrypto,url="_~getRandomVcryp0123456789bfhijklqsuvwxzABCDEFGHIJKLMNOPQSTUWXYZ",index_browser=function(e){e=e||21;for(var t="",r=crypto.getRandomValues(new Uint8Array(e));0<e--;)t+=url[63&r[e]];return t};let responsePosition={};var requestManager$1=class{constructor(e,t){var r=this;_defineProperty(this,"send",e=>(function(){var t=_asyncToGenerator(function*(t,n){const a=mergeDeepRight_1(r.requestObject,e),o=a.api,i=a.preUpdate,s=a.postUpdate,c=a.preError,u=a.postError,l=a.data,_=a.files,p=a.requestCancel,f=void 0===p||p,y=a.fileKey,h=void 0===y?r.options.fileKey:y,d=a.bodyKey,g=void 0===d?r.options.bodyKey:d,E=a.method,m=void 0===E?r.options.method:E,b=a.normalize,v=void 0===b?r.options.normalize:b,S=a.mergeStrategy,C=void 0===S?r.options.mergeStrategy:S,T=a.headers,w=void 0===T?r.options.header:T,A=a.responseKeyCode,R=void 0===A?r.options.responseKeyCode:A;try{const e=index_browser();let r=JSON.stringify(_objectSpread({},l,{requestID:e}));const a=axios$1.CancelToken.source();if(t({type:types.CDEEBEE_REQUESTMANAGER_SET,payload:{nanoID:e,api:o,source:a,requestCancel:f}}),_){const e=new FormData;for(let t=0;t<_.length;t+=1)e.append(h,_[t]);e.append(g,r),r=e}const p=yield axios$1({url:o,method:m,headers:w,data:r});if(p)for(responsePosition=Object.assign({[e]:{response:p.data,requestApi:o}},responsePosition);responsePosition[get_1(n().requestManager.activeRequest,"[0].nanoID")];){const e=n().requestManager.activeRequest[0].nanoID,r=responsePosition[e],a=r.response,o=r.requestApi;delete responsePosition[e],t({type:types.CDEEBEE_REQUESTMANAGER_SHIFT}),0===a[R]?(i&&i(p.data),t({type:types.CDEEBEEE_UPDATE,payload:{response:v({response:a,cdeebee:n().cdeebee,mergeStrategy:C}),cleanResponse:a,api:o,mergeStrategy:C}}),s&&s(p.data)):(c&&c(p.data),t({type:types.CDEEBEE_ERRORHANDLER_SET,payload:{api:o,cleanResponse:a}}),u&&u(p.data))}}catch(e){console.warn("@@makeRequest",e)}});return function(e,r){return t.apply(this,arguments)}})()),this.requestObject=e,this.options=_objectSpread({fileKey:"files",bodyKey:"body",method:"POST",normalize:defaultNormalize,mergeStrategy:cdeebeeMergeStrategy.merge,responseKeyCode:"responseStatus",header:{"content-type":"application/json"}},t)}},setKeyValueList=_setKeyValueList,setKeyValue=_setKeyValue,commitEntity$1=_commitEntity,resetEntity$1=_resetEntity;function _setKeyValueList(e,t,r,n){return(a,o)=>{n&&n.preChange&&n.preChange({entityList:e,entityID:t,list:r,dispatch:a,getState:o}),a({type:types.CDEEBEE_ENTITY_CHANGE_FIELD,payload:{entityList:e,entityID:t,list:r}}),n&&n.postChange&&n.postChange({entityList:e,entityID:t,list:r,dispatch:a,getState:o})}}function _setKeyValue(e,t,r,n,a){return setKeyValueList(e,t,[{key:r,value:n}],a)}function _commitEntity(e,t,r,n){return(a,o)=>{n&&n.preCommit&&n.preCommit({entityList:e,entityID:t,entity:r,dispatch:a,getState:o}),a({type:types.CDEEBEE_SET_ENTITY,payload:{entityList:e,entityID:t,entity:r}}),n&&n.postCommit&&n.postCommit({entityList:e,entityID:t,entity:r,dispatch:a,getState:o})}}function _resetEntity(e,t,r){return(n,a)=>{r&&r.preCommit&&r.preCommit({entityList:e,entityID:t,dispatch:n,getState:a}),n({type:types.CDEEBEE_RESET_ENTITY,payload:{entityList:e,entityID:t}}),r&&r.postCommit&&r.postCommit({entityList:e,entityID:t,dispatch:n,getState:a})}}function rewire$setKeyValueList(e){setKeyValueList=e}function rewire$setKeyValue(e){setKeyValue=e}function rewire$commitEntity(e){commitEntity$1=e}function rewire$resetEntity(e){resetEntity$1=e}function restore$2(){setKeyValueList=_setKeyValueList,setKeyValue=_setKeyValue,commitEntity$1=_commitEntity,resetEntity$1=_resetEntity}var _helpers,_cdeebee,_requestManager,_CdeebeeRequest,_cdeebeeTypes,_cdeebeeMergeStrategy,_cdeebeeActions,cdeebeeActions=Object.freeze({get setKeyValueList(){return setKeyValueList},get setKeyValue(){return setKeyValue},get commitEntity(){return commitEntity$1},get resetEntity(){return resetEntity$1},rewire$setKeyValueList:rewire$setKeyValueList,rewire$setKeyValue:rewire$setKeyValue,rewire$commitEntity:rewire$commitEntity,rewire$resetEntity:rewire$resetEntity,restore:restore$2}),_helpers2=helpers,_cdeebee2=cdeebee,_requestManager2=requestManager,_CdeebeeRequest2=requestManager$1,_cdeebeeTypes2=types,_cdeebeeMergeStrategy2=cdeebeeMergeStrategy,_cdeebeeActions2=cdeebeeActions;function rewire$helpers(e){_helpers=e}function rewire$cdeebee(e){_cdeebee=e}function rewire$requestManager(e){_requestManager=e}function rewire$CdeebeeRequest(e){_CdeebeeRequest=e}function rewire$cdeebeeTypes(e){_cdeebeeTypes=e}function rewire$cdeebeeMergeStrategy(e){_cdeebeeMergeStrategy=e}function rewire$cdeebeeActions(e){_cdeebeeActions=e}function restore$3(){_helpers=_helpers2,_cdeebee=_cdeebee2,_requestManager=_requestManager2,_CdeebeeRequest=_CdeebeeRequest2,_cdeebeeTypes=_cdeebeeTypes2,_cdeebeeMergeStrategy=_cdeebeeMergeStrategy2,_cdeebeeActions=_cdeebeeActions2}export{helpers,cdeebee,requestManager,requestManager$1 as CdeebeeRequest,types as cdeebeeTypes,cdeebeeMergeStrategy,cdeebeeActions,rewire$helpers,rewire$cdeebee,rewire$requestManager,rewire$CdeebeeRequest,rewire$cdeebeeTypes,rewire$cdeebeeMergeStrategy,rewire$cdeebeeActions,restore$3 as restore};
